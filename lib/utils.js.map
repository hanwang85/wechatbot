{"version":3,"sources":["../src/utils.js"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["'use strict'\nconst debug = require('debug')('utils')\n\nconst CONF = {\n  STATE: {\n    init: 'init',\n    uuid: 'uuid',\n    login: 'login',\n    logout: 'logout'\n  },\n\n  MSGTYPE_TEXT: 1,\n  MSGTYPE_IMAGE: 3,\n  MSGTYPE_VOICE: 34,\n  MSGTYPE_VIDEO: 43,\n  MSGTYPE_MICROVIDEO: 62,\n  MSGTYPE_EMOTICON: 47,\n  MSGTYPE_APP: 49,\n  MSGTYPE_VOIPMSG: 50,\n  MSGTYPE_VOIPNOTIFY: 52,\n  MSGTYPE_VOIPINVITE: 53,\n  MSGTYPE_LOCATION: 48,\n  MSGTYPE_STATUSNOTIFY: 51,\n  MSGTYPE_SYSNOTICE: 9999,\n  MSGTYPE_POSSIBLEFRIEND_MSG: 40,\n  MSGTYPE_VERIFYMSG: 37,\n  MSGTYPE_SHARECARD: 42,\n  MSGTYPE_SYS: 1e4,\n  MSGTYPE_RECALLED: 10002,\n\n  SYNCCHECK_RET_SUCCESS: 0,\n  SYNCCHECK_SELECTOR_NORMAL: 0,\n  SYNCCHECK_SELECTOR_MSG: 2,\n  SYNCCHECK_SELECTOR_MOBILEOPEN: 7,\n\n  SPECIALUSERS: ['newsapp', 'fmessage', 'filehelper', 'weibo', 'qqmail', 'fmessage', 'tmessage', 'qmessage', 'qqsync', 'floatbottle', 'lbsapp', 'shakeapp', 'medianote', 'qqfriend', 'readerapp', 'blogapp', 'facebookapp', 'masssendapp', 'meishiapp', 'feedsapp', 'voip', 'blogappweixin', 'weixin', 'brandsessionholder', 'weixinreminder', 'wxid_novlwrv3lqwv11', 'gh_22b87fa7cb3c', 'officialaccounts', 'notification_messages', 'wxid_novlwrv3lqwv11', 'gh_22b87fa7cb3c', 'wxitil', 'userexperience_alarm', 'notification_messages']\n}\n\nconst updateAPI = API => {\n  let e = API.baseUri\n  let t = 'weixin.qq.com'\n  let o = 'file.wx.qq.com'\n  let n = 'webpush.weixin.qq.com'\n  e.indexOf('wx2.qq.com') > -1 ? (t = 'weixin.qq.com', o = 'file2.wx.qq.com', n = 'webpush2.weixin.qq.com') : e.indexOf('qq.com') > -1 ? (t = 'weixin.qq.com', o = 'file.wx.qq.com', n = 'webpush.weixin.qq.com') : e.indexOf('web1.wechat.com') > -1 ? (t = 'wechat.com', o = 'file1.wechat.com', n = 'webpush1.wechat.com') : e.indexOf('web2.wechat.com') > -1 ? (t = 'wechat.com', o = 'file2.wechat.com', n = 'webpush2.wechat.com') : e.indexOf('wechat.com') > -1 ? (t = 'wechat.com', o = 'file.wechat.com', n = 'webpush.wechat.com') : e.indexOf('web1.wechatapp.com') > -1 ? (t = 'wechatapp.com', o = 'file1.wechatapp.com', n = 'webpush1.wechatapp.com') : (t = 'wechatapp.com', o = 'file.wechatapp.com', n = 'webpush.wechatapp.com')\n\n  API.jsLogin = 'https://login.' + t + '/jslogin'\n  API.login = 'https://login.' + t + '/cgi-bin/mmwebwx-bin/login'\n  API.synccheck = 'https://' + n + '/cgi-bin/mmwebwx-bin/synccheck'\n  API.webwxdownloadmedia = 'https://' + o + '/cgi-bin/mmwebwx-bin/webwxgetmedia'\n  API.webwxuploadmedia = 'https://' + o + '/cgi-bin/mmwebwx-bin/webwxuploadmedia'\n  API.webwxpreview = e + '/webwxpreview'\n  API.webwxinit = e + '/webwxinit'\n  API.webwxgetcontact = e + '/webwxgetcontact'\n  API.webwxsync = e + '/webwxsync'\n  API.webwxbatchgetcontact = e + '/webwxbatchgetcontact'\n  API.webwxgeticon = e + '/webwxgeticon'\n  API.webwxsendmsg = e + '/webwxsendmsg'\n  API.webwxsendmsgimg = e + '/webwxsendmsgimg'\n  API.webwxsendemoticon = e + '/webwxsendemoticon'\n  API.webwxsendappmsg = e + '/webwxsendappmsg'\n  API.webwxgetheadimg = e + '/webwxgetheadimg'\n  API.webwxgetmsgimg = e + '/webwxgetmsgimg'\n  API.webwxgetmedia = e + '/webwxgetmedia'\n  API.webwxgetvideo = e + '/webwxgetvideo'\n  API.webwxlogout = e + '/webwxlogout'\n  API.webwxgetvoice = e + '/webwxgetvoice'\n  API.webwxupdatechatroom = e + '/webwxupdatechatroom'\n  API.webwxcreatechatroom = e + '/webwxcreatechatroom'\n  API.webwxstatusnotify = e + '/webwxstatusnotify'\n  API.webwxcheckurl = e + '/webwxcheckurl'\n  API.webwxverifyuser = e + '/webwxverifyuser'\n  API.webwxfeedback = e + '/webwxsendfeedback'\n  API.webwxreport = e + '/webwxstatreport'\n  API.webwxsearch = e + '/webwxsearchcontact'\n  API.webwxoplog = e + '/webwxoplog'\n}\n\nconst convertEmoji = (s) => {\n  return s.replace(/<span.*?class=\"emoji emoji(.*?)\"><\\/span>/g, (a, b) => {\n    try {\n      let s = null\n      if (b.length === 4 || b.length === 5) {\n        s = ['0x' + b]\n      } else if (b.length === 8) {\n        s = ['0x' + b.slice(0, 4), '0x' + b.slice(4, 8)]\n      } else if (b.length === 10) {\n        s = ['0x' + b.slice(0, 5), '0x' + b.slice(5, 10)]\n      } else {\n        throw new Error('unknown emoji characters')\n      }\n      return String.fromCodePoint.apply(null, s)\n    } catch (err) {\n      debug(b, err)\n      return '*'\n    }\n  })\n}\n\nconst contentPrase = s => convertEmoji(s.replace('&lt;', '<').replace('&gt;', '>').replace('<br/>', '\\n'))\n\nmodule.exports = {\n  CONF,\n  updateAPI,\n  convertEmoji,\n  contentPrase\n}\n"]}